\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{relsize}
\usepackage{proof}
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{stmaryrd}
%\usepackage{color}
\usepackage{multirow}
\usepackage{makecell}
\usepackage{palatino}
\usepackage{mathpazo}
\renewcommand{\baselinestretch}{1} 
\usepackage{graphicx}
\usepackage{calc}
\usepackage{lipsum}  
\usepackage{ifthen}
\usepackage{hyperref}
\usepackage{calc}
\usepackage[bb=pazo]{mathalpha}
\usepackage{enumitem}
\usepackage{rotating}
%\usepackage{minted}
\usepackage[normalem]{ulem}
\usepackage{breakcites}
\usepackage{xfrac}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					font black magic
\DeclareSymbolFont{blah}{U}{jkpsyc}{m}{n}
\DeclareMathSymbol{\vardiamondsuit}{\mathalpha}{blah}{113}


\newcommand{\todo}{\textcolor{red}{todo}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 					bibliography horror
\usepackage{natbib}
\bibliographystyle{abbrvnat}
\setcitestyle{semicolon,open={[},close={]},aysep={, }, yysep={; }}
\renewcommand{\cite}{\citep}

\usepackage{chapterbib}
\renewcommand{\bibname}{Chapter Bibliography}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					itemize/enum
\setlist[itemize]{leftmargin=*}
\setlist[enumerate]{leftmargin=*}
\setlist{noitemsep}
\renewcommand{\theenumi}{\roman{enumi}}%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 					footnotes
\usepackage[perpage]{footmisc}
\interfootnotelinepenalty=10000

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                  tikz horror
\usepackage{tikz}
\usepackage{pgfplots}
\usetikzlibrary{fit,positioning,arrows,automata,shapes,backgrounds,
				calc,patterns}
\usepgfplotslibrary{fillbetween}
\usepackage{tikz-qtree}
\tikzset{
	unary/.style={thin,double},
	head/.style={ultra thick}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					plots
\pgfplotsset{
	width=0.8\textwidth, 
	compat=1.9, 
	enlarge x limits=0.05,
	minor grid style={loosely dashed, ultra thin, gray!30},
	major grid style={dashed, gray!60},
	ymajorgrids=true,
	minor y tick num=1,
	yminorgrids=true,
	xmajorgrids=true,
	xminorgrids=true,
	axis line style={draw=none},
	tick style={draw=none}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                  chapter / section formatting
\usepackage{chngcntr}
\renewcommand{\thechapter}{\Roman{chapter}}
\setcounter{secnumdepth}{3}
\counterwithout{section}{chapter}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					toc
\usepackage[titles]{tocloft}
%\addcontentsline{TABLE}{chapter}{Contents}
%%%\renewcommand{\cftdot}{\_}
%\renewcommand{\cftsecpresnum}{\hfil}
\renewcommand*{\cftsecindent}{0.5em} 			%		<--> SECNUM
\renewcommand*{\cftsecnumwidth}{1.5em}			%		<-  SECNUM ->
\renewcommand*{\cftsubsecindent}{2em} 			%		SECNUM <-->	SUBSECNUM
\renewcommand*{\cftsubsecnumwidth}{2.5em} 		%		<-- SUBSECNUM -->
\renewcommand*{\cftsubsubsecindent}{4.5em}		%		SUBSECNUM <--> SUBSUBSECNUM
\renewcommand*{\cftsubsubsecnumwidth}{3.5em}

\setcounter{tocdepth}{3}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%				lengths and spacings
\newcommand{\smallsep}{1.25em}
\newcommand{\midsep}{1.5em}
\usepackage[nodisplayskipstretch]{setspace}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%				tabular settings
\newcolumntype{C}{>{\centering\arraybackslash}X}
\newcolumntype{L}{>{\raggedright\arraybackslash}X}
\renewcommand{\arraystretch}{1.05}

\newcommand{\chapabstract}[1]{
	\vspace{-14pt}
	{\small
	\textit{
	\hfill\begin{tabular}[t]{@{}l@{}}
	#1
	\end{tabular}}
	\vspace{14pt}
}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					lingu examples
\newcommand{\textex}[1]{\textit{#1}}
\newcommand{\gap}{\_}
\newcommand{\texttr}[2]{\textit{#1} `#2'}
\makeatletter
\def\new@fontshape{}
\makeatother
\usepackage{gb4e}
\noautomath
\newcommand{\abbrv}[1]{\textsc{#1}}
\let\eachwordtwo=\small
\let\eachwordone=\textit
\counterwithin{xnumi}{chapter}
\exewidth{(1.234)}
\def\glt{\nobreak\vskip.01\baselineskip}

\makeatletter
\newcommand{\nolistbreak}{%
  \let\oldpar\par\def\par{\oldpar\nobreak}% Any \par issues a \nobreak
  \@nobreaktrue% Don't break with first \item
}
\makeatletter



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                  term / type / rule macros
\newcommand{\lam}{\mathnormal{\lambda}}
\newcommand{\smallprop}[1]{	\ensuremath{\normalfont\textsc{#1}}}
\newcommand{\prop}[1]{\ensuremath{\vnorm{\smallprop{#1}}}}
\newcommand{\smallterm}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\term}[1]{\smallterm{#1}}
\newcommand{\propcon}{\ensuremath{\mathsf{Prop}_0}}
\newcommand{\cterm}[1]{	\textrm{#1}}
\newcommand{\li}{\scalebox{1}[1]{\ensuremath{\multimap}}}
\newcommand{\ii}{\scalebox{1}[1]{\ensuremath{\to}}}
\newcommand{\il}{\scalebox{-1}[1]{$\li$}}
\newcommand{\divleft}{\backslash}
\newcommand{\divright}{	/}
\newcommand{\with}{{\ensuremath{\&}}}
\newcommand{\rulestyle}[1]{\ensuremath{\mathrm{#1}}}
\newcommand{\Exchange}{\rulestyle{ex}}
\newcommand{\Contraction}{\rulestyle{contr}}
\newcommand{\Weakening}{\rulestyle{weak}}
\newcommand{\Extraction}{\ensuremath{\rulestyle{extr}_{\xdiamond}}}
\newcommand{\Lex}{\rulestyle{lex}}
\newcommand{\Ax}{\rulestyle{id}}
\newcommand{\ctx}[1]{\llbracket{#1}\rrbracket}
\newcommand{\bracket}[1]{\langle{#1}\rangle}
\newcommand{\appright}{	\ensuremath{\triangleleft}}
\newcommand{\appleft}{\ensuremath{\triangleright}}
\newcommand{\nappright}{\ensuremath{\blacktriangleleft}}
\newcommand{\nappleft}{	\ensuremath{\blacktriangleright}}
\newcommand{\adbmal}{\scalebox{-1}[1]{\ensuremath{\lambda}}}
\newcommand{\types}{\ensuremath{\mathcal{U}}}
\newcommand{\lexicon}{\ensuremath{\mathcal{L}}}
\newcommand{\terms}{\ensuremath{\smallterm{Terms}}}
\newcommand{\cons}{\ensuremath{\smallterm{Cons}}}
\newcommand{\con}[1]{\smallterm{c}_{\mathnormal{#1}}}
\newcommand{\vars}{\ensuremath{\smallterm{Vars}}}
\newcommand{\str}[1]{\smallterm{\sslash{#1}\sslash}}
\newcommand{\Var}[1]{\smallterm{x}_{\mathnormal{#1}}}
\newcommand{\vari}{\Var{i}}
\newcommand{\varj}{\Var{j}}
\newcommand{\vark}{\Var{k}}
\newcommand{\varl}{\Var{l}}
\newcommand{\varm}{\Var{m}}
\newcommand{\varn}{\Var{n}}
\newcommand{\varo}{\Var{o}}

\newcommand{\ninfer}[3]{\infer[\!\!{#1}]{#2}{#3}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					grammar shortcuts
\newcommand{\w}[1]{\text{#1}}
\newcommand{\smallgtype}[1]{\ensuremath{\textsc{\normalfont\textsc{#1}}}}
\newcommand{\gtype}[2][l]{%
	\ifthenelse
		{\equal{#1}{s}}%
		{\smallgtype{#2}}%
		{\ensuremath{\vnorm{\smallgtype{#2}}}}%
}
\newcommand{\subcat}[3]{\ensuremath{\gtype[#1]{#2}_{\text{#3}}}}
\newcommand{\s}[1][]{\gtype[#1]{s}}
\newcommand{\smalls}{\s[s]}
\newcommand{\smain}[1][]{\subcat{#1}{\smalls}{main}}
\newcommand{\smallsmain}{\smain[s]}
\newcommand{\svi}[1][]{\subcat{#1}{\s}{vi}}
\newcommand{\smallsvi}{\svi[s]}
\newcommand{\ssub}[1][]{\subcat{#1}{\s}{sub}}
\newcommand{\smallssub}{\ssub[s]}
\newcommand{\np}[1][]{\gtype[#1]{np}}
\newcommand{\smallnp}{\np[s]}
\newcommand{\n}[1][]{\gtype[#1]{n}}
\newcommand{\smalln}{\n[s]}
\newcommand{\pp}[1][]{\gtype[#1]{pp}}
\newcommand{\smallpp}{\pp[s]}
\newcommand{\type}[1][]{\gtype[#1]{Type}}
\newcommand{\base}[1][]{\gtype[#1]{Base}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%				extraction shortcuts (extra)
\newcommand{\adj}[1][]{\gtype[#1]{adj}}
\newcommand{\bw}[1][]{\gtype[#1]{bw}}
\newcommand{\letter}[1][]{\gtype[#1]{let}}
\newcommand{\punct}[1][]{\gtype[#1]{punct}}
\newcommand{\lid}[1][]{\gtype[#1]{lid}}
\newcommand{\vnw}[1][]{\gtype[#1]{vnw}}
\newcommand{\tsw}[1][]{\gtype[#1]{tsw}}
\newcommand{\tw}[1][]{\gtype[#1]{tw}}
\newcommand{\vg}[1][]{\gtype[#1]{vg}}
\newcommand{\vz}[1][]{\gtype[#1]{vz}}
\newcommand{\ww}[1][]{\gtype[#1]{ww}}
\newcommand{\adv}[1][]{\gtype[#1]{adv}}
\newcommand{\ahi}[1][]{\gtype[#1]{ahi}}
\newcommand{\adjp}[1][]{\gtype[#1]{adjp}}
\newcommand{\cp}[1][]{\gtype[#1]{cp}}
\newcommand{\detp}[1][]{\gtype[#1]{detp}}
\newcommand{\infp}[1][]{\gtype[#1]{inf}}
\newcommand{\oti}[1][]{\gtype[#1]{oti}}
\newcommand{\ti}[1][]{\gtype[#1]{ti}}
\newcommand{\ppart}[1][]{\gtype[#1]{ppart}}
\newcommand{\ppres}[1][]{\gtype[#1]{ppres}}
\newcommand{\rel}[1][]{\gtype[#1]{rel}}
\newcommand{\svan}[1][]{\subcat{#1}{\smalls}{van}}
\newcommand{\q}[1][]{\gtype[#1]{q}}
\newcommand{\sub}[1][]{\gtype[#1]{sub}}
\newcommand{\whq}[1][]{\subcat{#1}{\q[s]}{wh}}
\newcommand{\whrel}[1][]{\subcat{#1}{\rel[s]}{wh}}
\newcommand{\whsub}[1][]{\subcat{#1}{\sub[s]}{wh}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					type modalities

\makeatletter
\newcommand{\getfontdim}[1]{%
  \fontdimen22
  \ifx#1\displaystyle\textfont\else
  \ifx#1\textstyle\textfont\else
  \ifx#1\scriptstyle\scriptfont\else
  \scriptscriptfont\fi\fi\fi 2
}
\makeatother

% ratio: 1.8/2.75
\newcommand{\domodaldiamondscale}[2]{\raisebox{0.175\getfontdim{#1}}{\scalebox{0.9}{\ensuremath{#1#2}}}}
\newcommand{\domodalboxscale}[2]{\raisebox{0.15\getfontdim{#1}}{\scalebox{0.85}{\ensuremath{#1#2}}}}
\newcommand{\domodalxdiascale}[2]{\raisebox{0\getfontdim{#1}}{\scalebox{1.375}{\ensuremath{#1#2}}}}
\newcommand{\modalxdiascale}[1]{\mathpalette\domodalxdiascale{#1}\relax}
\newcommand{\modaldiamondscale}[1]{\mathpalette\domodaldiamondscale{#1}\relax}
\newcommand{\modalboxscale}[1]{\mathpalette\domodalboxscale{#1}\relax}
\renewcommand{\diamond}{\modaldiamondscale{\diamondsuit}}
\newcommand{\xdiamond}{\modalxdiascale{\vardiamondsuit}}
\newcommand{\bx}{\modalboxscale{\Box}}
\newcommand{\xbx}{\modalboxscale{\blacksquare}}
\newcommand{\dep}[1]{\ensuremath{\mathnormal{#1}}}
\newcommand{\deps}{\ensuremath{\mathsf{Deps}}}
\newcommand{\adjuncts}{\ensuremath{\dep{Adjs}}}
\newcommand{\complements}{\ensuremath{\dep{Comps}}}
\newcommand{\ddia}[1]{\diamond_{\scalebox{0.66}{\dep{\smaller{#1}}}}}
\newcommand{\dxdia}[1]{\xdiamond_{\scalebox{0.66}{\dep{\smaller{#1}}}}}
\newcommand{\dbox}[1]{\bx_{\scalebox{0.66}{\dep{\smaller{#1}}}}}
\newcommand{\dxbox}[1]{\xbx_{\scalebox{0.66}{\dep{\smaller{#1}}}}}
\newcommand{\dbra}[2]{\bracket{#1}^{\scalebox{0.66}{\dep{#2}}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                  term modalities
\makeatletter
\newcommand{\domodaltermscale}[2]{\raisebox{0.25\getfontdim{#1}}{\scalebox{0.85}{\ensuremath{#1#2}}}}
\makeatother
\newcommand{\modaltermscale}[1]{\mathpalette\domodaltermscale{#1}\relax}
\newcommand{\boxelim}{\modaltermscale{\blacktriangledown}}
\newcommand{\dboxelim}[1]{\boxelim_\dep{#1}}
\newcommand{\boxintro}{\modaltermscale{\blacktriangle}}
\newcommand{\diaelim}{\modaltermscale{\triangledown}}
\newcommand{\ddiaelim}[1]{\diaelim_\dep{#1}}
\newcommand{\diaintro}{\modaltermscale{\vartriangle}}
\newcommand{\ddiaintro}[1]{\diaintro_\dep{#1}}
\newcommand{\caseof}[3]{\cterm{case \term{#1} of \term{#2} in \term{#3}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					logics
\newcommand{\logic}[1]{\textbf{#1}}
\newcommand{\ILL}{\logic{ILL}}
\newcommand{\IL}{\logic{IL}}
\newcommand{\LC}{\logic{L}}
\newcommand{\NL}{\logic{NL}}
\newcommand{\NLP}{\logic{NLP}}
\newcommand{\LP}{\logic{LP}}
\newcommand{\NLPplus}{\ensuremath{\NLP_{\diamond,\bx}}}
\newcommand{\hm}[1]{\ensuremath{\lceil{#1}\rceil}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                  proofnet stuff
\newcommand{\pprop}[1]{\ensuremath{\smallprop{#1}^{+}}}
\newcommand{\nprop}[1]{\ensuremath{\smallprop{#1}^{-}}}
\newcommand{\vnorm}[1]{\vphantom{\dbra{\chi}{cnj}}{#1}}
\newcommand{\parlink}{\raisebox{\depth}{\scalebox{-1}[-1]{$\with$}}}
\newcommand{\sbind}{\ensuremath{\mkern-0.5mu\cdot\mkern-0.5mu }}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					shortcuts
\newcommand{\copyleft}{\reflectbox{\copyright}}
\newcommand{\greek}[1]{\mathrm{#1}}
\newcommand{\Tau}{\greek{T}}
\newcommand{\Beta}{\greek{B}}
\newcommand{\bred}{\overset{\beta}{\leadsto}}
\newcommand{\bredstar}{\overset{\beta *}{\leadsto}}
\newcommand{\qqquad}{\quad\qquad}
\newcommand{\qqqquad}{\qquad\qquad}
\newcommand{\lassycap}[3]{
	\smaller
	\begin{tabularx}{1\textwidth}{@{}l@{}}
	\multicolumn{1}{@{}C@{}}{\fname{#1}}\\
	\toprule
	\textex{#2}\\
	`#3'\\
	\bottomrule
	\end{tabularx}	
}
\newcommand{\aethelcap}[4]{
	{\smaller
	\begin{tabularx}{1\textwidth}{@{}l@{}}
	\multicolumn{1}{@{}C@{}}{\fname{#1}}\\
	\toprule
	\textex{#2}\\
	`#3'\\
	{#4}\\
	\bottomrule
	\end{tabularx}	
	}
}
\newcommand{\fname}[1]{\texttt{#1}}
\newcommand{\seq}[2]{\mathbf{#1}_{#2}}
\newcommand{\tseq}{\ensuremath{\seq{t}{0:n}}}
\newcommand{\wseq}{\ensuremath{\seq{w}{0:n}}}
\newcommand{\biject}{\rightarrowtail\mathrel{\mkern-15mu}\twoheadrightarrow}
\newcommand{\stat}[2]{#1\textsubscript{$\pm$#2}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					hyphenations
\hyphenation{con-sti-tuen-cy}
\hyphenation{a-me-na-ble}
\hyphenation{phra-ses}
\hyphenation{name-ly}
\hyphenation{co-do-main}